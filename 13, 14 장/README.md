# 진행 자료

# 컴포넌트 응집도

- 어떤 클래스를 어느 컴포넌트에 포함시켜야할까?
- 이는 중요한 결정이므로 제대로 된 소프트웨어 엔지니어링 원칙의 도움을 받아야한다.
- 하지만 우리는 임시방편적으로 결정을 내려왔다.

<br/>

- 이 장에서는 컴포넌트 응집도와 관련된 세 가지 원칙을 논의한다.
1. REP: 재사용/릴리스 등가 원칙 (Reuse/Release Equivalence Principle)
2. CCP: 공통 폐쇄 원칙 (Common Closure Principle)
3. CRP: 공통 재사용 원칙 (Common Reuse Principle)

## REP: 재사용/릴리스 등가 원칙

| 재사용 단위는 릴리스 단위와 같다.

- 지난 십 년은 모듈 관리 도구가 우후죽순으로 등장한 시기였다.
- 이 기간에 재사용 가능한 컴포넌트나 라이브러리가 엄청나게 많이 만들어졌기 때문에, 이 같은 도구들은 점점 중요해졌다.

<br/>

- 돌이켜보면 REP는 너무 당연해 보인다.
- 컴포넌트가 추적 관리되지 않거나, 릴리스 번호가 부여되지 않는다면 재사용하고 싶어도 할 수 없고, 하지도 않을 것이다.
- 즉 릴리스에 충분한 정보가 있어야 개발자가 새 릴리스를 통합할지, 한다면 언제할지 결정할 수 있다.

<br/>

- 이 원칙을 소프트웨어 설계와 아키텍처 관점에서 보면 단일 컴포넌트는 응집성 높은 클래스와 모듈들로 구성되어야 함을 뜻한다.
- 즉 컴포넌트를 구성하는 모든 모듈을 서로 공유하는 중요한 테마나 목적이 있어야한다.

<br/>

- 이 사실은 물론 너무 당연하다.
- 하나의 컴포넌트로 묶인 클래스와 모듈은 
1. 버전 번호가 같아야 하며 
2. 동일한 릴리스로 추적 관리되고
3. 동일한 문서에 포함되어야 한다
- 는 사실은 컴포넌트 제작자 입장이나 사용자 입장에서도 이치에 맞는 얘기다

<br/>

- 하지만 이 원칙의 조언은 약하다.
- 구체적인 해결 방법을 제시해주지는 못하기 때문이다.
- 이 원칙의 약점은 다음에 다룰 두 원칙이 지닌 강점을 통해 충분히 보완할 수 있다.

## CCP: 공통 폐쇄 원칙 

| 동일한 이유로 동일한 시점에 변경되는 클래스를 같은 컴포넌트로 묶어라. 서로 다른 시점에 다른 이유로 변경되는 클래스는 다른 컴포넌트로 분리하라.

- 이 원칙은 SRP를 컴포넌트 관점에서 다시 쓴 것이다.
- SRP에서 단일 클래스는 변겨의 이유가 여러 개 있어서는 안 된다고 말하듯이, CCP에서도 단일 컴포넌트는 변경의 이유가 여러 개 있어서는 안된다고 말한다.

<br/>

- 대다수의 어플리케이션에서 유지보수성은 재사용성보다 훨씬 중요하다.
- 어플리케이션 코드가 반드시 변경되어야한다면, 변경 사항이 여러 컴포넌트에 분산되어 발생하는 것보다, 변경 모두가 단일 컴포넌트에서 발생하는 편이 낫다.
- 변경된 컴포넌트만 재배포하면 되기 때문이다.

<br/>

- CCP는 같은 이유로 변경될 가능성이 있는 클래스는 모두 한곳으로 묶을 것을 권한다.
- 이를 통해 소프트웨어를 릴리스, 재검증, 배포하는 일과 관련된 작업량을 최소화할 수 있다.

<br/>

- 이 원칙은 OCP와도 밀접하게 관련되어 있다.
- OCP에서 말하는 폐쇄와 CCP에서 말하는 폐쇄와 뜻이 같다. 즉 변경에 닫혀있어야한다.
- 하지만 100% 완전한 폐쇄는 불가능하므로 전략적으로 폐쇄해야 한다.
- 따라서 변경이 생겼을 때, 그 변경으로 영향을 받는 컴포넌트들이 최소한으로 한정될 가능성이 확실히 높아진다.

<br/>

## CRP: 공통 재사용 원칙

| 컴포넌트 사용자들을 필요하지 않는 것에 의존하게 강요하지 말라.

- CRP도 클래스와 모듈을 어느 컴포넌트에 위치시킬지 결정할 때 도움되는 원칙이다.
- 대체로 재사용 가능한 클래스는 재사용 모듈의 일부로써 해당 모듈의 다른 클래스와 상호작용 하는 경우가 많다.
- 간단한 사례로 컨테이너 클래스와 해당 클래스의 이터레이터 클래스를 들 수 있다.
- 이 클래스들은 강하게 결합되어 있기 때문에, 이 클래스들은 반드시 동일한 컴포넌트에 위치해야 한다.

<br/>

- CRP는 동일한 컴포넌트로 묶어서는 안되는 클래스가 무엇인지도 말해준다.
- 어떤 컴포넌트가 다른 컴포넌트를 사용하면, 두 컴포넌트 사이에는 의존성이 생긴다.
- 어쩌면 단 하나의 클래스만 사용하는 상황일 수도 있다. 하지만 그렇다고 해서 의존성은 조금도 약해지지 않는다.
- 이 같은 의존성으로 인해 사용되는 컴포넌트가 변경될 때마다 사용하는 컴포넌트도 변경해야 할 가능성이 높다.
- 따라서 의존해야 하는 컴포넌트가 있다면 해당 컴포넌트의 모든 클래스에 대해 의존함을 확실히 인지해야 한다.

<br/>

- 바꿔 말하면, 한 컴포넌트에 속한 클래스들은 더 작게 그룹지을 수 없다.
- 즉, 그중 일부 클래스에만 의존하고 다른 클래스와는 독립적일 수 없음을 확실히 인지해야 한다.
- 따라서 CRP는 어떤 클래스를 한데 묶어도 되는지보다는, 어떤 클래스를 한데 묶어서는 안 되는지에 대해서 훨씬 더 많은 것을 이야기한다.

## 컴포넌트 응집도에 대한 균형 다이어 그램

- 응집도에 관한 세 원칙이 서로 상충된다는 것은 눈치챘을 것이다.
- REP와 CCP는 포함 원칙이다.
- 즉, 두 원칙은 컴포넌트를 더욱 크게 만든다.
- CRP는 배제 원칙이며, 컴포넌트를 더욱 작게 만든다.



---

# 질의응답

```text
하진:

대답: (PR에서 suggest로 커밋하기 편하게 질문 작성 후 이 구문은 지워주세요 ㅎㅎ)
```

```text
진영:

대답: (PR에서 suggest로 커밋하기 편하게 질문 작성 후 이 구문은 지워주세요 ㅎㅎ)
```

```text
규훤:

대답: (PR에서 suggest로 커밋하기 편하게 질문 작성 후 이 구문은 지워주세요 ㅎㅎ)
```

```text
진호:

대답: (PR에서 suggest로 커밋하기 편하게 질문 작성 후 이 구문은 지워주세요 ㅎㅎ)
```


```text
천규: 
13장에서 제가 이해한 바로는 클래스 B가 클래스 A에 의존할 경우 (A ← B) CCP에 의해 둘은 같은 컴포넌트에 있어야 합니다.
그렇다면 서로 다른 다수의 클래스가 연속적으로 의존하는 형태를 지니는 상황(A ← B ← C ← D ← ...)에서는
컴포넌트 구조를 어떻게 만드는 것이 좋을까요?

A의 변경이 하위 클래스들의 변경을 유발할 가능성이 높으니 모두 한 컴포넌트에 배치해야 할 것 같기도 하고,
직접적인 의존이 없는 클래스가 많아 분리해야 할 것 같기도 합니다.
(ex. D는 A, B에 직접 의존하지는 않으므로 A, B와 다른 컴포넌트에 존재해야 하는가?)

쓰고 보니 이게 CCP와 CRP의 충돌인가? 라는 생각이 드네요. 사실 두 원칙의 차이도 확실하게 이해되질 않습니다.
그냥 해당 클래스들의 의존관계를 개선하는게 근본적인 해결책인가 싶기도 하고...
부디 이 어리석은 중생을 구원해 주시면 감사하겠습니다.

대답: 
일단 B, C, D... 들이 A 변경에 의해 변경된다면 이것부터 따져야 할 것 같습니다.
동일한 시점에 동일한 이유로 변경되었는가? (CCP)
이를 따졌을 때 모든 클래스들이 동일한 이유로 변경된다면 한 컴포넌트에 있는게 맞습니다.

또한 이게 한 컴포넌트라고 봤을 때 CRP도 만족하게 됩니다.
모든 클래스가 동일한 이유, 즉 목적이 같은 애들끼리 강하게 의존하고 있기 때문에
해당 컴포넌트는 재사용성이 높아지겠죠.

즉 예시로 주신 상황만으로는 판단하기 힘듭니다.

CCP와 CRP는 어쩔 수 없이 충돌이 나는 개념들입니다.
CCP는 포함, CRP는 배제 원칙이기 때문이죠.

그리고 두 원칙의 차이도 명확하게 구분짓기 힘든것도 당연합니다.
CCP는 SRP와, CRP는 ISP와 비슷하기 때문이죠.
CCP 즉 서로 다른 시점에 다른 이유로 변경되는 것들은 분리해라.
CRP 즉 컴포넌트에 사용하지 않는 클래스를 의존하지 마라.

클래스들의 의존관계를 개선하는건 언제나 근본적인 문제입니다.
SOLID가 제대로 지켜지지 않고는 컴포넌트 결합을 말할 수는 없죠.
위에서 말한 것들은 SOLID가 지켜졌다는 전제로 말씀드렸습니다.
```

```text
준우:

대답: (PR에서 suggest로 커밋하기 편하게 질문 작성 후 이 구문은 지워주세요 ㅎㅎ)
```

```text
이영:

대답: (PR에서 suggest로 커밋하기 편하게 질문 작성 후 이 구문은 지워주세요 ㅎㅎ)
```

```text
영재:

대답: (PR에서 suggest로 커밋하기 편하게 질문 작성 후 이 구문은 지워주세요 ㅎㅎ)
```

```text
태훈:

대답: (PR에서 suggest로 커밋하기 편하게 질문 작성 후 이 구문은 지워주세요 ㅎㅎ)
```

```text
가온:

대답: (PR에서 suggest로 커밋하기 편하게 질문 작성 후 이 구문은 지워주세요 ㅎㅎ)
```
